<html>

<body>
    <h1>Setting</h1>

    <div style="display: flex; flex-direction: column;">
        <label for="device">device</label>
        <input type="text" name="device" id="device" placeholder="mobile">
    </div>

    <div style="display: flex; flex-direction: column;">
        <button id="start-checking-button">Start Checking</button>
        <button id="convert-without-checking-button">Convert without Checking</button>
    </div>

    <script>
        const device = document.getElementById('device');
        const startCheckingButton = document.getElementById('start-checking-button');
        const convertWithoutCheckingButton = document.getElementById('convert-without-checking-button');

        startCheckingButton.addEventListener('click', () => {
            if ( device.value === '') {
                alert('Please input device');
                return;
            }
            parent.postMessage({
                pluginMessage: {
                    type: "start-checking",
                    device: device.value
                }
            }, "*");
        });

        convertWithoutCheckingButton.addEventListener('click', () => {
            parent.postMessage({
                pluginMessage: {
                    type: "convert-without-checking",
                    device: device.value
                }
            }, "*");
        });

        onmessage = (event) => {
            const message = event.data.pluginMessage;
            if (message.type === 'set-device') {
                device.value = message.device;
            }
        };
    </script>
</body>

</html>